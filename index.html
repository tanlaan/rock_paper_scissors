<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>

    <body>
    <script>
        function computerPlay(){
            const choice = getRandomInt(3);
            switch (choice) {
                case 0:
                    return 'rock';
                    break;
                case 1:
                    return 'paper';
                    break;
                case 2:
                    return 'scissors';
                    break;
                default:
                    return 'error';
            }
        }

        function playerSelection(){
            let choice;
            while (true){
                choice = prompt('Rock, Paper, or Scissors?');
                switch (choice.toLowerCase()){
                    case 'rock':
                        return 'rock';
                        break;
                    case 'paper':
                        return 'paper';
                        break;
                    case 'scissors':
                        return 'scissors';
                        break;
                    default:
                        alert('Incorrect, it needs to be rock, paper, or scissors');
                }
            }
        }
        
        function playRound(){
            const playerChoice = playerSelection();
            const computerChoice = computerPlay();
            if (playerChoice == computerChoice) return 'tie';
            console.log(outcome(playerChoice, computerChoice));
            return outcome(playerChoice, computerChoice);
        }

        function outcome(player, computer){
            switch (player){
                case 'rock':
                    return (computer == 'paper') ? 'loss':'win';
                    break;
                case 'paper':
                    return (computer == 'scissors') ? 'loss':'win';
                    break;
                case 'scissors':
                    return (computer == 'rock') ? 'loss':'win';
                defualt:
                    return;
            }
        }

        function game(){
            let i;
            let playerScore = 0;
            let computerScore = 0;
            for (i = 0; i < 5; i++){
                let winState = playRound();
                switch (winState){
                    case 'win':
                        playerScore++;
                        break;
                    case 'loss':
                        computerScore++;
                        break;
                    case 'tie':
                        break;
                    default:
                        return;
                }
            }
            if (playerScore == computerScore) {
                console.log('tie');
                return 'tie';
            }
            console.log((playerScore > computerScore) ? 'win':'loss');
            return (playerScore > computerScore) ? 'win': 'loss';
        }


        function getRandomInt(max){
            return Math.floor(Math.random() * Math.floor(max));
        }

    </script>
    </body>
</html>
